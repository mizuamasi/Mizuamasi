<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>シェーダーエディター</title>
  <link rel="stylesheet" href="styles.css">
  
  <!-- CodeMirrorのCSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/theme/dracula.min.css">
  
  <!-- Font Awesomeの読み込み（integrity属性を削除） -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <!-- 認証画面 -->
  <div id="auth-container">
    <h1>ログイン / 新規登録</h1>
    <input type="text" id="nickname" placeholder="ニックネーム">
    <input type="password" id="password" placeholder="パスワード">
    <div id="auth-buttons">
      <button id="register-btn">新規登録</button>
      <button id="login-btn">ログイン</button>
    </div>
    <button id="continue-without-tracking-btn">トラッキングなしで続行</button>
  </div>
  
  <!-- スピナー要素（非表示時） -->
  <div id="auth-spinner" class="spinner hidden"></div>

  <!-- 上部ツールバー -->
  <div id="toolbar">
    <button id="save-btn" title="保存"><i class="fas fa-save"></i></button>
    <button id="load-btn" title="読み出し"><i class="fas fa-folder-open"></i></button>
    <button id="popup-btn" title="ポップアップ"><i class="fas fa-external-link-alt"></i></button>
    <button id="toggle-editor-btn" title="エディタ表示/非表示"><i class="fas fa-code"></i></button>
    
    <!-- 右側にサンプル選択とマイク選択を配置 -->
    <div class="toolbar-right">
      <select id="sample-select" title="サンプルシェーダーを選択">
        <option value="">サンプルを選択</option>
        <option value="SampleCode/sample1.frag">Sample 1</option>
        <option value="SampleCode/sample2.frag">Sample 2</option>
      </select>
      <select id="microphone-select" title="マイクを選択">
        <option value="">マイクを選択</option>
      </select>
    </div>
  </div>

  <!-- メインコンテナ -->
  <div id="main-container" class="hidden">
    <!-- レンダリングキャンバス -->
    <canvas id="render-canvas"></canvas>
    
    <!-- エディターコンテナ -->
    <div id="editor-container">
      <textarea id="shader-code"></textarea>
    </div>
    
    <!-- コンソールコンテナ -->
    <div id="console-container">
      <div id="console-output"></div>
    </div>
    
    <!-- コントロールパネル -->
    <div id="control-container">
      <h2>Uniform Controls</h2>
      <div id="uniform-controls">
        <!-- ユニフォームスライダーが動的に追加されます -->
      </div>
    </div>
  </div>

  <!-- ロードモーダル -->
  <div id="load-modal" class="modal hidden">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>保存されたシェーダーコード</h2>
      <select id="saved-select">
        <option value="">保存済みコードを選択</option>
      </select>
      <button id="load-saved-btn">ロード</button>
    </div>
  </div>

  <!-- Font AwesomeのJS（アイコン用） -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
  
  <!-- CodeMirrorのJS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/clike/clike.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/edit/matchbrackets.min.js"></script>
  
  <!-- エディターのスクリプト -->
  <script src="editor.js"></script>
</body>
</html>
